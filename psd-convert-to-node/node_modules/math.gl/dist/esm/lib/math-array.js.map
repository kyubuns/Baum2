{"version":3,"sources":["../../../src/lib/math-array.js"],"names":["config","formatValue","equals","MathArray","constructor","copy","check","array","i","ELEMENTS","offset","formatString","opts","string","printTypes","name","Float32Array","length","a","b","t","undefined","ai","vector","Math","min","max","minVector","maxVector","valid","Number","isFinite","debug","validate","Error","subtract","addScalar","scale","Array"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {config, formatValue, equals} from './common';\n\nexport default class MathArray extends Array {\n  clone() {\n    return new this.constructor().copy(this).check();\n  }\n\n  copy(array) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i];\n    }\n    return this.check();\n  }\n\n  set(...args) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = args[i] || 0;\n    }\n    return this.check();\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n    return this.check();\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n    return `${opts.printTypes ? this.constructor.name : ''}[${string}]`;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  // Modifiers\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n    return this.check();\n  }\n\n  inverse() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = 1 / this[i];\n    }\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this; // eslint-disable-line\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n    return this.check();\n  }\n\n  // Debug checks\n\n  validate(array = this) {\n    let valid = array && array.length === this.ELEMENTS;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(array[i]);\n    }\n    return valid;\n  }\n\n  check(array = this) {\n    if (config.debug && !this.validate(array)) {\n      throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);\n    }\n    return this;\n  }\n\n  // three.js compatibility\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(a) {\n    return this.scale(a);\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n    return this.check();\n  }\n}\n"],"file":"math-array.js"}